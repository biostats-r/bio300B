<!DOCTYPE html>
<html lang="en"><head>
<link href="./figures/favicon.png" rel="icon" type="image/png">
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-bd0f20613ab34a035844aaae9062fb4e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.20">

  <meta name="author" content="Richard J. Telford (Richard.Telford@uib.no)">
  <meta name="dcterms.date" content="2025-08-17">
  <title>Bio302 - Biostatistikk – Data manipulation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-6b997d83eefb4b85464ae5ae3c88d4dd.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data manipulation</h1>
  <p class="subtitle">Bio300B Lecture 3</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Richard J. Telford (Richard.Telford@uib.no) 
</div>
        <p class="quarto-title-affiliation">
            Institutt for biovitenskap, UiB
          </p>
    </div>
</div>

  <p class="date">17 August 2025</p>
</section>
<section id="data-cleaning" class="slide level2">
<h2>Data cleaning</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/wild_data.jpg" style="width:85.0%" alt="Meme showing cute puppy representing data used in tutorials and a weird dog representing data in the wild."></p>
</figure>
</div>
</div>
</div>

<aside class="notes">
<ul>
<li>Critical</li>
<li>Time consuming</li>
<li>Do in code for reproducibility</li>
<li>Often not taught</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><div>
<p>Figure from <a href="https://twitter.com/towards_AI/status/1332567246011555840?s=20">towards_AI</a></p>
</div></aside></section>
<section id="penguins" class="slide level2">
<h2>Penguins</h2>

<img data-src="figures/penguins_logo.png" width="120" class="r-stretch"><div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-2"><a></a>penguins</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
# ℹ 342 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<aside class="notes">
<p>palmerpenguins: Palmer Archipelago (Antarctica) Penguin Data</p>
<p>Size measurements for adult foraging Adélie, Chinstrap, and Gentoo penguins observed on islands in the Palmer Archipelago, Antarctica.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="importing-data" class="slide level2">
<h2>Importing data</h2>
<p>First step of almost any data analysis</p>
<ul>
<li><code>read_delim()</code> from <code>readr</code> package</li>
<li><code>read_excel()</code> from <code>readxl</code> package</li>
</ul>
<p>Lots of arguments to help import data correctly</p>
<p>Find the data rectangle and import just that.</p>
</section>
<section id="paths" class="slide level2">
<h2>Paths</h2>
<p>Use RStudio projects</p>
<p>Use relative paths</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="co"># absolute path - bad</span></span>
<span id="cb3-2"><a></a><span class="st">"c://users/richard/documents/biostats/data/data.csv"</span></span>
<span id="cb3-3"><a></a><span class="co"># relative path - good</span></span>
<span id="cb3-4"><a></a><span class="st">"data/data.csv"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="pipes" class="slide level2">
<h2>Pipes</h2>
<p>Analysis:</p>
<ul>
<li>With penguins data</li>
<li>Drop rows with NA sex</li>
<li>find mean bill length per species per sex</li>
</ul>
</section>
<section class="slide level2">

<p>First solution</p>
<p>Nested functions</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">summarise</span>(</span>
<span id="cb4-2"><a></a>  <span class="fu">group_by</span>(<span class="fu">drop_na</span>(penguins, sex), species, sex), </span>
<span id="cb4-3"><a></a>  <span class="at">bill_length_mean =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb4-4"><a></a>  <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  species sex    bill_length_mean
  &lt;fct&gt;   &lt;fct&gt;             &lt;dbl&gt;
1 Adelie  female             37.3
2 Adelie  male               40.4
# ℹ 4 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>Second solution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>p <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(penguins, sex)</span>
<span id="cb6-2"><a></a>p <span class="ot">&lt;-</span> <span class="fu">group_by</span>(p, species, sex)</span>
<span id="cb6-3"><a></a>p <span class="ot">&lt;-</span> <span class="fu">summarise</span>(p,</span>
<span id="cb6-4"><a></a>         <span class="at">bill_length_mean =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb6-5"><a></a>        <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Third solution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>p_1 <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(penguins, sex)</span>
<span id="cb7-2"><a></a>p_2 <span class="ot">&lt;-</span> <span class="fu">group_by</span>(p_1, species, sex)</span>
<span id="cb7-3"><a></a>p_3 <span class="ot">&lt;-</span> <span class="fu">summarise</span>(p_2,</span>
<span id="cb7-4"><a></a>         <span class="at">bill_length_mean =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb7-5"><a></a>        <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section class="slide level2">

<h3 id="pipe-solution">pipe solution</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>p <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a></a>  <span class="fu">summarise</span>(</span>
<span id="cb8-5"><a></a>    <span class="at">bill_length_mean =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb8-6"><a></a>    <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Pipe puts result of left hand side into first available argument on right hand side</p>
<ul>
<li><code>|&gt;</code> native R pipe</li>
<li><code>%&gt;%</code> <code>magrittr</code> pipe</li>
</ul>
</section>
<section id="tidy-data" class="slide level2">
<h2>Tidy data</h2>
<blockquote>
<p>“Happy families are all alike; every unhappy family is unhappy in its own way”<br>
— Tolstoy</p>
</blockquote>
<p>Tidy data</p>
<ul>
<li>easy to work with</li>
<li>use standard tools to manipulate, visualise and analyse</li>
<li>can reuse code from other projects</li>
</ul>
</section>
<section id="what-are-tidy-data" class="slide level2">
<h2>What are tidy data</h2>
<ul>
<li>Every column is a variable.</li>
<li>Every row is an observation.</li>
<li>Every cell is a single value.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figures/tidy1.png" style="width:100.0%" alt="Representation of tidy data, showing variables in columns, observations in rows, and single values in each cell. Source: R for Data Science"></p>
</figure>
</div>
</div>
</div>

<aside><div>
<p><a href="https://vita.had.co.nz/papers/tidy-data.pdf">Wickham (2014) Tidy data</a></p>
</div></aside></section>
<section id="untidy-data" class="slide level2">
<h2>Untidy data</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<colgroup>
<col style="width: 12%">
<col style="width: 25%">
<col style="width: 14%">
<col style="width: 17%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Date</th>
<th style="text-align: left;">17.06.2016</th>
<th style="text-align: left;">21.06.2016</th>
<th style="text-align: left;">23.06.2016</th>
<th style="text-align: left;">26.06.2016</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Time</td>
<td style="text-align: left;">10:00</td>
<td style="text-align: left;">11:00</td>
<td style="text-align: left;">11:00</td>
<td style="text-align: left;">13:00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weather</td>
<td style="text-align: left;">Sunny_PartlyCloudy</td>
<td style="text-align: left;">Cloudy_Fog</td>
<td style="text-align: left;">Cloudy_Sunny</td>
<td style="text-align: left;">Cloudy_Rainy_Windy_Fog</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Observer</td>
<td style="text-align: left;">LV_AH</td>
<td style="text-align: left;">LV</td>
<td style="text-align: left;">LV</td>
<td style="text-align: left;">LV</td>
</tr>
<tr class="even">
<td style="text-align: left;">E01a</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E01b</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">E01c</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E01d</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">E01e</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="the-heart-of-your-analysis-pipeline" class="slide level2">
<h2>The heart of your analysis pipeline</h2>
<div class="cell" data-fig.alt="Diagram showing tidy data at the heart of data analysis" data-layout-align="default">
<div class="cell-output-display">
<div id="tidy-heart">
<div>
<svg width="960" height="480" viewbox="0.00 0.00 312.07 281.23" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none; display: block; margin: auto auto auto auto">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 277.23)">
<title>circo</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-277.23 308.07,-277.23 308.07,4 -4,4"></polygon>
<!-- a1 -->
<g id="node1" class="node">
<title>a1</title>
<ellipse fill="purple" stroke="black" cx="72.49" cy="-247.55" rx="18" ry="18"></ellipse>
</g>
<!-- b -->
<g id="node4" class="node">
<title>b</title>
<polygon fill="red" stroke="black" points="193.49,-185.88 85.49,-185.88 85.49,-149.88 193.49,-149.88 193.49,-185.88"></polygon>
<text text-anchor="middle" x="139.49" y="-162.48" font-family="Palatino" font-size="18.00">Tidy data</text>
</g>
<!-- a1&#45;&gt;b -->
<g id="edge1" class="edge">
<title>a1-&gt;b</title>
<path fill="none" stroke="black" d="M83.85,-233.38C93.19,-222.55 106.68,-206.91 118.04,-193.74"></path>
<polygon fill="black" stroke="black" points="120.9,-195.79 124.78,-185.93 115.6,-191.22 120.9,-195.79"></polygon>
</g>
<!-- a2 -->
<g id="node2" class="node">
<title>a2</title>
<polygon fill="darkgreen" stroke="black" points="166.49,-240.1 166.49,-255.01 150.67,-265.55 128.31,-265.55 112.49,-255.01 112.49,-240.1 128.31,-229.55 150.67,-229.55 166.49,-240.1"></polygon>
<polygon fill="none" stroke="black" points="170.49,-237.96 170.49,-257.15 151.88,-269.55 127.09,-269.55 108.49,-257.15 108.49,-237.96 127.09,-225.55 151.88,-225.55 170.49,-237.96"></polygon>
</g>
<!-- a2&#45;&gt;b -->
<g id="edge2" class="edge">
<title>a2-&gt;b</title>
<path fill="none" stroke="black" d="M139.49,-225.33C139.49,-216.32 139.49,-205.71 139.49,-196.13"></path>
<polygon fill="black" stroke="black" points="142.99,-195.9 139.49,-185.9 135.99,-195.9 142.99,-195.9"></polygon>
</g>
<!-- a3 -->
<g id="node3" class="node">
<title>a3</title>
<polygon fill="orange" stroke="black" points="242.49,-253.66 221.86,-253.66 215.49,-273.41 209.12,-253.66 188.49,-253.66 205.18,-241.45 198.8,-221.7 215.49,-233.9 232.18,-221.7 225.8,-241.45 242.49,-253.66"></polygon>
</g>
<!-- a3&#45;&gt;b -->
<g id="edge3" class="edge">
<title>a3-&gt;b</title>
<path fill="none" stroke="black" d="M202.25,-233.02C191.59,-222.12 176.31,-206.51 163.5,-193.42"></path>
<polygon fill="black" stroke="black" points="165.79,-190.75 156.3,-186.05 160.79,-195.65 165.79,-190.75"></polygon>
</g>
<!-- c -->
<g id="node5" class="node">
<title>c</title>
<polygon fill="#63b8ff" stroke="black" points="229.49,-113.88 49.49,-113.88 49.49,-77.88 229.49,-77.88 229.49,-113.88"></polygon>
<text text-anchor="middle" x="139.49" y="-90.48" font-family="Palatino" font-size="18.00">Clean &amp; tidy data</text>
</g>
<!-- b&#45;&gt;c -->
<g id="edge4" class="edge">
<title>b-&gt;c</title>
<path fill="none" stroke="black" d="M139.49,-149.57C139.49,-141.86 139.49,-132.59 139.49,-123.99"></path>
<polygon fill="black" stroke="black" points="142.99,-123.98 139.49,-113.98 135.99,-123.98 142.99,-123.98"></polygon>
</g>
<!-- d -->
<g id="node6" class="node">
<title>d</title>
<polygon fill="#63b8ff" stroke="black" points="64.99,-0.12 68.64,-0.23 72.24,-0.4 75.8,-0.63 79.28,-0.92 82.69,-1.25 86,-1.64 89.21,-2.09 92.29,-2.59 95.25,-3.13 98.06,-3.73 100.72,-4.37 103.23,-5.06 105.56,-5.79 107.72,-6.56 109.7,-7.38 111.49,-8.23 113.09,-9.11 114.51,-10.03 115.72,-10.97 116.74,-11.95 117.57,-12.95 118.2,-13.97 118.65,-15.01 118.9,-16.06 118.97,-17.13 118.85,-18.21 118.57,-19.3 118.11,-20.39 117.49,-21.48 116.71,-22.58 115.79,-23.66 114.72,-24.74 113.52,-25.81 112.19,-26.87 110.74,-27.91 109.19,-28.93 107.53,-29.93 105.78,-30.9 103.94,-31.85 102.03,-32.77 100.04,-33.65 97.99,-34.5 95.88,-35.31 93.72,-36.09 91.52,-36.82 89.27,-37.5 86.99,-38.15 84.68,-38.74 82.35,-39.29 79.99,-39.79 77.62,-40.23 75.23,-40.62 72.83,-40.96 70.41,-41.24 67.99,-41.47 65.57,-41.64 63.14,-41.76 60.71,-41.81 58.27,-41.81 55.84,-41.76 53.41,-41.64 50.98,-41.47 48.56,-41.24 46.15,-40.96 43.75,-40.62 41.36,-40.23 38.98,-39.79 36.63,-39.29 34.29,-38.74 31.98,-38.15 29.71,-37.5 27.46,-36.82 25.26,-36.09 23.1,-35.31 20.99,-34.5 18.94,-33.65 16.95,-32.77 15.04,-31.85 13.2,-30.9 11.45,-29.93 9.79,-28.93 8.24,-27.91 6.79,-26.87 5.46,-25.81 4.26,-24.74 3.19,-23.66 2.27,-22.58 1.49,-21.48 0.87,-20.39 0.41,-19.3 0.12,-18.21 0.01,-17.13 0.08,-16.06 0.33,-15.01 0.77,-13.97 1.41,-12.95 2.23,-11.95 3.26,-10.97 4.47,-10.03 5.88,-9.11 7.49,-8.23 9.28,-7.38 11.26,-6.56 13.42,-5.79 15.75,-5.06 18.25,-4.37 20.92,-3.73 23.73,-3.13 26.68,-2.59 29.77,-2.09 32.98,-1.64 36.29,-1.25 39.69,-0.92 43.18,-0.63 46.73,-0.4 50.34,-0.23 53.99,-0.12 57.65,-0.06 61.33,-0.06 64.99,-0.12"></polygon>
<text text-anchor="middle" x="59.49" y="-15.54" font-family="Palatino" font-size="18.00">Analysis</text>
</g>
<!-- c&#45;&gt;d -->
<g id="edge5" class="edge">
<title>c-&gt;d</title>
<path fill="none" stroke="black" d="M120.53,-77.59C110.47,-68.42 97.92,-56.98 86.83,-46.86"></path>
<polygon fill="black" stroke="black" points="89.18,-44.27 79.43,-40.12 84.46,-49.44 89.18,-44.27"></polygon>
</g>
<!-- e -->
<g id="node7" class="node">
<title>e</title>
<polygon fill="#63b8ff" stroke="black" points="228.23,-0.12 233.36,-0.23 238.43,-0.4 243.43,-0.63 248.33,-0.92 253.12,-1.25 257.78,-1.64 262.29,-2.09 266.63,-2.59 270.79,-3.13 274.74,-3.73 278.49,-4.37 282.01,-5.06 285.29,-5.79 288.33,-6.56 291.11,-7.38 293.63,-8.23 295.89,-9.11 297.87,-10.03 299.58,-10.97 301.02,-11.95 302.18,-12.95 303.08,-13.97 303.7,-15.01 304.05,-16.06 304.15,-17.13 303.99,-18.21 303.59,-19.3 302.94,-20.39 302.07,-21.48 300.98,-22.58 299.67,-23.66 298.17,-24.74 296.48,-25.81 294.61,-26.87 292.58,-27.91 290.39,-28.93 288.06,-29.93 285.6,-30.9 283.01,-31.85 280.32,-32.77 277.53,-33.65 274.64,-34.5 271.68,-35.31 268.64,-36.09 265.54,-36.82 262.38,-37.5 259.18,-38.15 255.93,-38.74 252.64,-39.29 249.33,-39.79 245.99,-40.23 242.63,-40.62 239.25,-40.96 235.86,-41.24 232.45,-41.47 229.04,-41.64 225.62,-41.76 222.2,-41.81 218.78,-41.81 215.36,-41.76 211.94,-41.64 208.53,-41.47 205.12,-41.24 201.73,-40.96 198.35,-40.62 194.99,-40.23 191.65,-39.79 188.33,-39.29 185.05,-38.74 181.8,-38.15 178.6,-37.5 175.44,-36.82 172.34,-36.09 169.3,-35.31 166.34,-34.5 163.45,-33.65 160.66,-32.77 157.96,-31.85 155.38,-30.9 152.92,-29.93 150.58,-28.93 148.4,-27.91 146.36,-26.87 144.5,-25.81 142.81,-24.74 141.3,-23.66 140,-22.58 138.91,-21.48 138.04,-20.39 137.39,-19.3 136.99,-18.21 136.83,-17.13 136.92,-16.06 137.28,-15.01 137.9,-13.97 138.79,-12.95 139.96,-11.95 141.39,-10.97 143.1,-10.03 145.09,-9.11 147.34,-8.23 149.87,-7.38 152.65,-6.56 155.69,-5.79 158.97,-5.06 162.49,-4.37 166.23,-3.73 170.19,-3.13 174.35,-2.59 178.69,-2.09 183.2,-1.64 187.85,-1.25 192.65,-0.92 197.55,-0.63 202.55,-0.4 207.62,-0.23 212.75,-0.12 217.9,-0.06 223.07,-0.06 228.23,-0.12"></polygon>
<text text-anchor="middle" x="220.49" y="-15.54" font-family="Palatino" font-size="18.00">Visualisation</text>
</g>
<!-- c&#45;&gt;e -->
<g id="edge6" class="edge">
<title>c-&gt;e</title>
<path fill="none" stroke="black" d="M158.68,-77.59C168.55,-68.71 180.77,-57.71 191.73,-47.83"></path>
<polygon fill="black" stroke="black" points="194.35,-50.18 199.44,-40.89 189.67,-44.98 194.35,-50.18"></polygon>
</g>
</g>
</svg>
</div>
</div>
</div>
</div>
</section>
<section id="reshaping-data" class="slide level2">
<h2>Reshaping data</h2>
<p>Long data vs wide data</p>

<img data-src="figures/tidyr-pivot_longer_wider.gif" alt="Animation showing how pivot_longer converts wide data to long, and pivot_wider does the opposite." class="r-stretch"></section>
<section class="slide level2">

<p>Wide data</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>mites <span class="co"># part of vegan::mite</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sample Brachy PHTH HPAV RARD
1      1     17    5    5    3
2      2      2    7   16    0
3      3      4    3    1    1
4      4     23    7   10    2
5      5      5    8   13    9</code></pre>
</div>
</div>
<p>Wide format data needed for ordinations and related methods used in Bio303</p>
</section>
<section id="making-longer-data" class="slide level2">
<h2>Making longer data</h2>
<p><code>tidyr::pivot_longer()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>mites_long <span class="ot">&lt;-</span> mites <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Brachy<span class="sc">:</span>RARD, </span>
<span id="cb11-3"><a></a>               <span class="at">names_to =</span> <span class="st">"taxon"</span>, </span>
<span id="cb11-4"><a></a>               <span class="at">values_to =</span> <span class="st">"count"</span>)</span>
<span id="cb11-5"><a></a>mites_long</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 3
   sample taxon  count
    &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
 1      1 Brachy    17
 2      1 PHTH       5
 3      1 HPAV       5
 4      1 RARD       3
 5      2 Brachy     2
 6      2 PHTH       7
 7      2 HPAV      16
 8      2 RARD       0
 9      3 Brachy     4
10      3 PHTH       3
# ℹ 10 more rows</code></pre>
</div>
</div>
</section>
<section id="making-wider-data" class="slide level2">
<h2>Making wider data</h2>
<p><code>tidyr::pivot_wider()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>mites_wide <span class="ot">&lt;-</span> mites_long <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"taxon"</span>, </span>
<span id="cb13-3"><a></a>              <span class="at">values_from =</span> <span class="st">"count"</span>)</span>
<span id="cb13-4"><a></a>mites_wide</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  sample Brachy  PHTH  HPAV  RARD
   &lt;int&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1      1     17     5     5     3
2      2      2     7    16     0
3      3      4     3     1     1
4      4     23     7    10     2
5      5      5     8    13     9</code></pre>
</div>
</div>
</section>
<section id="processing-data-with-dplyr" class="slide level2">
<h2>Processing data with <code>dplyr</code></h2>
<p>Key dplyr functions</p>
<ul>
<li><code>select()</code></li>
<li><code>filter()</code></li>
<li><code>mutate()</code></li>
<li><code>summarise()</code></li>
<li><code>group_by()</code></li>
</ul>
<p>Normally load <code>dplyr</code> with <code>library(tidyverse)</code></p>
</section>
<section id="selecting-columns" class="slide level2">
<h2>Selecting columns</h2>
<p><code>dplyr::select()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a></a>  <span class="fu">select</span>(species, bill_length_mm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 2
  species bill_length_mm
  &lt;fct&gt;            &lt;dbl&gt;
1 Adelie            39.1
2 Adelie            39.5
# ℹ 342 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>bill_length_mm, <span class="sc">-</span>bill_depth_mm)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 6
  species island    flipper_length_mm body_mass_g sex     year
  &lt;fct&gt;   &lt;fct&gt;                 &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
1 Adelie  Torgersen               181        3750 male    2007
2 Adelie  Torgersen               186        3800 female  2007
# ℹ 342 more rows</code></pre>
</div>
</div>
</section>
<section id="selecting-adjacent-columns" class="slide level2">
<h2>Selecting adjacent columns</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a></a>  <span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1           39.1          18.7               181        3750
2           39.5          17.4               186        3800
# ℹ 342 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>(bill_length_mm<span class="sc">:</span>body_mass_g))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
  species island    sex     year
  &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt;  &lt;int&gt;
1 Adelie  Torgersen male    2007
2 Adelie  Torgersen female  2007
# ℹ 342 more rows</code></pre>
</div>
</div>
</section>
<section id="select-helpers" class="slide level2">
<h2>Select helpers</h2>
<p><code>ends_with()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a></a>  <span class="fu">select</span>(species, <span class="fu">ends_with</span>(<span class="st">"mm"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
  species bill_length_mm bill_depth_mm flipper_length_mm
  &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
1 Adelie            39.1          18.7               181
2 Adelie            39.5          17.4               186
# ℹ 342 more rows</code></pre>
</div>
</div>
<ul>
<li><code>starts_with()</code></li>
<li><code>contains()</code></li>
<li><code>matches()</code> regular expressions</li>
</ul>
</section>
<section id="your-turn" class="slide level2">
<h2>Your turn</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="fu">names</span>(penguins)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "species"           "island"            "bill_length_mm"   
[4] "bill_depth_mm"     "flipper_length_mm" "body_mass_g"      
[7] "sex"               "year"             </code></pre>
</div>
</div>
<p>How would you make a data frame with</p>
<ul>
<li>just species and island</li>
<li>without year</li>
<li>with species and the length measurements</li>
</ul>
</section>
<section id="filtering-rows" class="slide level2 scrollable">
<h2>Filtering rows</h2>
<p><code>dplyr::filter()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>penguins <span class="sc">|&gt;</span> <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Gentoo"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 124 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Gentoo  Biscoe           46.1          13.2               211        4500
2 Gentoo  Biscoe           50            16.3               230        5700
# ℹ 122 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>One or more logical statements</p>
<ul>
<li><code>==</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>!=</code></li>
</ul>
<aside class="notes">
<p>separate statements with commas</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="near" class="slide level2">
<h2>near()</h2>
<p>Problem:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">-</span> <span class="dv">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.440892e-16</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><span class="math inline">\(\sqrt{2}\)</span> is irrational - cannot be perfectly represented</p>
<p>Solution:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">near</span>(<span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<aside class="notes">
<p>data stored as doubles - finite precision</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="in" class="slide level2">
<h2><code>%in%</code></h2>
<p>Problem</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Gentoo"</span> <span class="sc">|</span> species <span class="sc">==</span> <span class="st">"Chinstrap"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 192 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Gentoo  Biscoe           46.1          13.2               211        4500
2 Gentoo  Biscoe           50            16.3               230        5700
# ℹ 190 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<ul>
<li><code>|</code> OR</li>
</ul>
<p>Solution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a></a>  <span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Gentoo"</span>, <span class="st">"Chinstrap"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 192 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Gentoo  Biscoe           46.1          13.2               211        4500
2 Gentoo  Biscoe           50            16.3               230        5700
# ℹ 190 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="between" class="slide level2">
<h2><code>between()</code></h2>
<p>Problem</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a></a>  <span class="fu">filter</span>(body_mass_g <span class="sc">&gt;=</span> <span class="dv">2000</span>, body_mass_g <span class="sc">&lt;=</span> <span class="dv">3000</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Dream            37            16.9               185        3000
2 Adelie  Dream            37.5          18.9               179        2975
# ℹ 9 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Solution</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a></a>  <span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="at">left =</span> <span class="dv">2000</span>, <span class="at">right =</span> <span class="dv">3000</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Dream            37            16.9               185        3000
2 Adelie  Dream            37.5          18.9               179        2975
# ℹ 9 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="partial-string-matches" class="slide level2">
<h2>Partial string matches</h2>
<p>Problem</p>
<p>Want to filter by partial text match</p>
<p>solution: <code>stringr</code> package</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(species, <span class="st">"G"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 124 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Gentoo  Biscoe           46.1          13.2               211        4500
2 Gentoo  Biscoe           50            16.3               230        5700
# ℹ 122 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Regular expressions for more powerful matching.</p>
</section>
<section id="how-would-you" class="slide level2">
<h2>How would you</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a>penguins</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
# ℹ 342 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Get a data frame with</p>
<ul>
<li>Male Gentoo penguins</li>
<li>Penguins with a mass &gt; 1000 g</li>
<li>Penguins from Dream or Biscoe Island</li>
</ul>
</section>
<section id="mutating-columns-with-mutate" class="slide level2">
<h2>Mutating columns with mutate()</h2>
<p>Make a new column or change an existing column</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a>penguins <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb47-2"><a></a>  <span class="at">species =</span> <span class="fu">tolower</span>(species),</span>
<span id="cb47-3"><a></a>  <span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="dv">1000</span>,</span>
<span id="cb47-4"><a></a>  <span class="at">bill_ratio =</span> bill_length_mm<span class="sc">/</span>bill_depth_mm</span>
<span id="cb47-5"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;chr&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 adelie  Torgersen           39.1          18.7               181        3750
2 adelie  Torgersen           39.5          17.4               186        3800
# ℹ 342 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, body_mass_kg &lt;dbl&gt;,
#   bill_ratio &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="useful-functions-for-mutate" class="slide level2">
<h2>Useful functions for mutate</h2>
<ul>
<li>mutate character columns with <code>stringr</code>, <code>glue</code></li>
<li>mutate factor columns with <code>forcats</code></li>
<li>mutate dates with <code>lubridate</code></li>
</ul>
</section>
<section id="summarising-data-with-summarise" class="slide level2">
<h2>Summarising data with summarise</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a></a>  <span class="fu">summarise</span>(</span>
<span id="cb49-3"><a></a>    <span class="at">max_mass =</span> <span class="fu">max</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb49-4"><a></a>    <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-5"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  max_mass mean_bill_length
     &lt;int&gt;            &lt;dbl&gt;
1     6300             43.9</code></pre>
</div>
</div>
<p>Useful functions</p>
<ul>
<li>limits <code>min()</code> <code>max()</code></li>
<li>centre <code>mean()</code> <code>median()</code></li>
<li>spread <code>sd()</code></li>
<li>number <code>n()</code> <code>n_distinct()</code></li>
</ul>
</section>
<section id="grouping-data" class="slide level2">
<h2>Grouping data</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a></a>  <span class="fu">group_by</span>(species, island)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
# Groups:   species, island [5]
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
# ℹ 342 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Mutate and summarise now work per group</p>
</section>
<section id="mutating-grouped-data" class="slide level2">
<h2>Mutating grouped data</h2>
<p>Analysis per group</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a></a>  <span class="fu">mutate</span>(<span class="at">bill_length_mean =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb53-4"><a></a>         <span class="at">bill_length_centred =</span> bill_length_mm <span class="sc">-</span> bill_length_mean)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 10
# Groups:   species [3]
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
# ℹ 342 more rows
# ℹ 4 more variables: sex &lt;fct&gt;, year &lt;int&gt;, bill_length_mean &lt;dbl&gt;,
#   bill_length_centred &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="summarising-grouped-data" class="slide level2">
<h2>Summarising grouped data</h2>
<p>Summary per group</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb55-2"><a></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a></a>  <span class="fu">summarise</span>(</span>
<span id="cb55-4"><a></a>    <span class="at">max_mass =</span> <span class="fu">max</span>(body_mass_g),</span>
<span id="cb55-5"><a></a>    <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm),</span>
<span id="cb55-6"><a></a>   <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb55-7"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  species   max_mass mean_bill_length
  &lt;fct&gt;        &lt;int&gt;            &lt;dbl&gt;
1 Adelie          NA             NA  
2 Chinstrap     4800             48.8
3 Gentoo          NA             NA  </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p><code>NA</code> - Not available - missing data</p>
<p><code>NA</code> are contagious: what is <code>5 + NA</code>?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a></a>  <span class="fu">summarise</span>(</span>
<span id="cb57-4"><a></a>    <span class="at">max_mass =</span> <span class="fu">max</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-5"><a></a>    <span class="at">mean_bill_length =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-6"><a></a>   <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb57-7"><a></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  species   max_mass mean_bill_length
  &lt;fct&gt;        &lt;int&gt;            &lt;dbl&gt;
1 Adelie        4775             38.8
2 Chinstrap     4800             48.8
3 Gentoo        6300             47.5</code></pre>
</div>
</div>
</section>
<section id="counting-rows" class="slide level2">
<h2>Counting rows</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a></a>  <span class="fu">count</span>(species, island, sex)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 4
  species island sex        n
  &lt;fct&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;int&gt;
1 Adelie  Biscoe female    22
2 Adelie  Biscoe male      22
# ℹ 11 more rows</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a></a>  <span class="fu">group_by</span>(species, island, sex) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 4
  species island sex        n
  &lt;fct&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;int&gt;
1 Adelie  Biscoe female    22
2 Adelie  Biscoe male      22
# ℹ 11 more rows</code></pre>
</div>
</div>
</section>
<section id="mutating-joins" class="slide level2">
<h2>Mutating joins</h2>
<p>Merge two tibbles</p>

<img data-src="figures/left-join.gif" alt="Animation showing how left_join merges two data frames by a common variable." class="r-stretch"></section>
<section id="left_join" class="slide level2">
<h2>left_join()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a>band_members</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>band_instruments</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
</div><p>. . .</p>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>band_members <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a></a>  <span class="fu">left_join</span>(band_instruments, <span class="at">by =</span> <span class="fu">join_by</span>(name))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 Mick  Stones  &lt;NA&gt;  
2 John  Beatles guitar
3 Paul  Beatles bass  </code></pre>
</div>
</div>
</section>
<section id="other-joins" class="slide level2">
<h2>Other joins</h2>
<ul>
<li><code>inner_join()</code></li>
<li><code>full_join()</code></li>
</ul>
</section>
<section id="filtering-joins" class="slide level2">
<h2>Filtering joins</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a><span class="co">#semi join</span></span>
<span id="cb69-2"><a></a>band_members <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a></a>  <span class="fu">semi_join</span>(band_instruments, <span class="at">by =</span> <span class="fu">join_by</span>(name))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 John  Beatles
2 Paul  Beatles</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a><span class="co">#anti join</span></span>
<span id="cb71-2"><a></a>band_members <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a></a>  <span class="fu">anti_join</span>(band_instruments, <span class="at">by =</span> <span class="fu">join_by</span>(name))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  name  band  
  &lt;chr&gt; &lt;chr&gt; 
1 Mick  Stones</code></pre>
</div>
</div>
</section>
<section id="further-reading" class="slide level2">
<h2>Further reading</h2>
<p>Wickham et al.&nbsp;(2023) <a href="http://r4ds.hadley.nz/"><em>R for Data Science</em></a></p>
<p>Wickham, H. <a href="https://adv-r.hadley.nz/index.html"><em>Advanced R</em></a></p>



<img data-src="figures/r4ds-cover.jpg" alt="Front page of the R for Data Science book with a kākāpō." class="r-stretch"></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>